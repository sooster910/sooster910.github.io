<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.7.1 -->
<title>React Code splitting ì ìš©ê¸° | Hyunsu</title>
<meta name="generator" content="Jekyll v3.9.0" />
<meta property="og:title" content="React Code splitting ì ìš©ê¸°" />
<meta name="author" content="Hyunsu Joo" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="ì´ í¬ìŠ¤íŠ¸ëŠ” íšŒì‚¬ì˜ ë¦¬ì•¡íŠ¸ í”„ë¡œì íŠ¸ì˜ ë¡œë”© ìµœì í™” ì ìš©ê¸°ë¥¼ ìœ íŠœë¸Œì˜ codevolutionì˜ mini projectë¡œ ì¬êµ¬ì„± í•œ ê²ƒì…ë‹ˆë‹¤. ì €ì˜ ê²½í—˜ìœ¼ë¡œ ì•„ì§ ë¶€ì¡±í•œ ì ì´ ë§ìŠµë‹ˆë‹¤.ğŸ˜­ ë°œì „í•˜ëŠ” ê°œë°œìê°€ ë  ìˆ˜ ìˆë„ë¡ ì„¤ëª…ì´ ì˜ ëª»ë˜ì—ˆë‹¤ê±°ë‚˜ ì¡°ê¸ˆ ë” ë³´ì¶©ì„¤ëª…ì´ í•„ìš”í•˜ì‹œë‹¤ê³  ìƒê°ë˜ì‹œë©´ ëŒ“ê¸€ ë‚¨ê²¨ ì£¼ì„¸ìš”. ì–¸ì œë“ ì§€ í™˜ì˜ì…ë‹ˆë‹¤ ğŸ˜„" />
<meta property="og:description" content="ì´ í¬ìŠ¤íŠ¸ëŠ” íšŒì‚¬ì˜ ë¦¬ì•¡íŠ¸ í”„ë¡œì íŠ¸ì˜ ë¡œë”© ìµœì í™” ì ìš©ê¸°ë¥¼ ìœ íŠœë¸Œì˜ codevolutionì˜ mini projectë¡œ ì¬êµ¬ì„± í•œ ê²ƒì…ë‹ˆë‹¤. ì €ì˜ ê²½í—˜ìœ¼ë¡œ ì•„ì§ ë¶€ì¡±í•œ ì ì´ ë§ìŠµë‹ˆë‹¤.ğŸ˜­ ë°œì „í•˜ëŠ” ê°œë°œìê°€ ë  ìˆ˜ ìˆë„ë¡ ì„¤ëª…ì´ ì˜ ëª»ë˜ì—ˆë‹¤ê±°ë‚˜ ì¡°ê¸ˆ ë” ë³´ì¶©ì„¤ëª…ì´ í•„ìš”í•˜ì‹œë‹¤ê³  ìƒê°ë˜ì‹œë©´ ëŒ“ê¸€ ë‚¨ê²¨ ì£¼ì„¸ìš”. ì–¸ì œë“ ì§€ í™˜ì˜ì…ë‹ˆë‹¤ ğŸ˜„" />
<link rel="canonical" href="https://sooster910.github.io/2021/01/01/react-codeSplitting.html" />
<meta property="og:url" content="https://sooster910.github.io/2021/01/01/react-codeSplitting.html" />
<meta property="og:site_name" content="Hyunsu" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-01-01T00:00:00+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="React Code splitting ì ìš©ê¸°" />
<script type="application/ld+json">
{"mainEntityOfPage":{"@type":"WebPage","@id":"https://sooster910.github.io/2021/01/01/react-codeSplitting.html"},"author":{"@type":"Person","name":"Hyunsu Joo"},"description":"ì´ í¬ìŠ¤íŠ¸ëŠ” íšŒì‚¬ì˜ ë¦¬ì•¡íŠ¸ í”„ë¡œì íŠ¸ì˜ ë¡œë”© ìµœì í™” ì ìš©ê¸°ë¥¼ ìœ íŠœë¸Œì˜ codevolutionì˜ mini projectë¡œ ì¬êµ¬ì„± í•œ ê²ƒì…ë‹ˆë‹¤. ì €ì˜ ê²½í—˜ìœ¼ë¡œ ì•„ì§ ë¶€ì¡±í•œ ì ì´ ë§ìŠµë‹ˆë‹¤.ğŸ˜­ ë°œì „í•˜ëŠ” ê°œë°œìê°€ ë  ìˆ˜ ìˆë„ë¡ ì„¤ëª…ì´ ì˜ ëª»ë˜ì—ˆë‹¤ê±°ë‚˜ ì¡°ê¸ˆ ë” ë³´ì¶©ì„¤ëª…ì´ í•„ìš”í•˜ì‹œë‹¤ê³  ìƒê°ë˜ì‹œë©´ ëŒ“ê¸€ ë‚¨ê²¨ ì£¼ì„¸ìš”. ì–¸ì œë“ ì§€ í™˜ì˜ì…ë‹ˆë‹¤ ğŸ˜„","@type":"BlogPosting","headline":"React Code splitting ì ìš©ê¸°","dateModified":"2021-01-01T00:00:00+00:00","url":"https://sooster910.github.io/2021/01/01/react-codeSplitting.html","datePublished":"2021-01-01T00:00:00+00:00","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/css/style.css">
  <link rel="icon" type="image/png" href="/assets/favicon.png" />
  <link href="http://cdn.jsdelivr.net/gh/joungkyun/font-d2coding/d2coding.css" rel="stylesheet" type="text/css">
  <link href="/assets/css/syntax.css" rel="stylesheet" />
  <link rel="stylesheet" href="//cdn.jsdelivr.net/font-iropke-batang/1.2/font-iropke-batang.css">
  <link rel="preconnect" href="https://fonts.gstatic.com"><link type="application/atom+xml" rel="alternate" href="https://sooster910.github.io/feed.xml" title="Hyunsu" /></head>
<body><div class="site-header">
  <div class="wrapper">
    <a class="site-title" rel="author" href="/">Hyunsu<b class="command_prompt"></b><b class="blinking_cursor">_</b></a>
    <span class="social_links">
        <a class="color-indigo-hover" href="https://www.linkedin.com/in/hyunsu-joo/"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path><rect x="2" y="9" width="4" height="12"></rect><circle cx="4" cy="4" r="2"></circle></svg></i></a><a class="color-indigo-hover" href="https://github.com/sooster910"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg></i></a>
    </span>
  </div>
</div>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        
<div class="post">
  <h1 class="post-title">React Code splitting ì ìš©ê¸°</h1>
  
  <div class="post-tags">
      <div class="post-date">
      Published on 01 Jan 2021</div>

      
      <a class="tag" href="/tag/React/">React</a>
      
       
  </div>
 
  
  
  <ul>
  <li>ì´ í¬ìŠ¤íŠ¸ëŠ” íšŒì‚¬ì˜ ë¦¬ì•¡íŠ¸ í”„ë¡œì íŠ¸ì˜ ë¡œë”© ìµœì í™” ì ìš©ê¸°ë¥¼ ìœ íŠœë¸Œì˜ codevolutionì˜ mini projectë¡œ ì¬êµ¬ì„± í•œ ê²ƒì…ë‹ˆë‹¤. ì €ì˜ ê²½í—˜ìœ¼ë¡œ ì•„ì§ ë¶€ì¡±í•œ ì ì´ ë§ìŠµë‹ˆë‹¤.ğŸ˜­ ë°œì „í•˜ëŠ” ê°œë°œìê°€ ë  ìˆ˜ ìˆë„ë¡ ì„¤ëª…ì´ ì˜ ëª»ë˜ì—ˆë‹¤ê±°ë‚˜ ì¡°ê¸ˆ ë” ë³´ì¶©ì„¤ëª…ì´ í•„ìš”í•˜ì‹œë‹¤ê³  ìƒê°ë˜ì‹œë©´ ëŒ“ê¸€ ë‚¨ê²¨ ì£¼ì„¸ìš”. ì–¸ì œë“ ì§€ í™˜ì˜ì…ë‹ˆë‹¤ ğŸ˜„</li>
</ul>

<h2 id="ëª©ì°¨">ëª©ì°¨</h2>
<p><a href="#puppeteerjest">1.puppeteer + Jest</a><br />
 <a href="#npm-run-test-ì‹¤í–‰í™˜ê²½-êµ¬ì¶•">2. npm run test ì‹¤í–‰í™˜ê²½ êµ¬ì¶• </a><br />
 <a href="#headless-chromium-í…ŒìŠ¤íŠ¸-ì½”ë“œë¡œ-ì˜¤í”ˆí•˜ê¸°">3. headless chromium í…ŒìŠ¤íŠ¸ ì½”ë“œë¡œ ì˜¤í”ˆí•˜ê¸°</a><br />
 <a href="#drydont-repeat-yourself">4. beforeEach( ), afterEach( ) ì´ìš©í•˜ì—¬ ë¦¬íŒ©í† ë§</a><br />
 <a href="#test-case-ì‘ì„±">5. Jest test case ì‘ì„±</a></p>

<h2 id="code-splitting">Code Splitting</h2>

<p>ì„œë¹„ìŠ¤ë¥¼ êµ¬ì„±í•˜ëŠ” ë¦¬ì•¡íŠ¸ì˜ ëª¨ë“  ì»´í¬ë„ŒíŠ¸ë“¤ì€ bundle.jsë¼ëŠ” í•˜ë‚˜ì˜ íŒŒì¼ì— ë²ˆë“¤ë§ëœë‹¤. bundle.js ë¼ëŠ” íŒŒì¼ì€ ë¸Œë¼ìš°ì € ë‹¤ìš´ë°›ê²Œ ë˜ëŠ”ë° ì´ê²ƒì€ ì‚¬ìš©ìê°€ http ì„œë²„ ìš”ì²­ì„ í•˜ì§€ ì•Šê³  ì›í™œí•˜ê²Œ ì„œë¹„ìŠ¤ë¥¼ ì‚¬ìš©í•  ìˆ˜ìˆê²Œ í•œë‹¤. í•˜ì§€ë§Œ ì•±ì˜ ê·œëª¨ê°€ ì»¤ì§ˆìˆ˜ë¡ ë²ˆë“¤ë§ ì‚¬ì´ì¦ˆë„ ì»¤ì§€ê²Œ ëœë‹¤. ì´ë ‡ê²Œ ë˜ë©´ ì‚¬ìš©ìì¸¡ì—ì„  ì´ˆê¸° í˜ì´ì§€ ë¡œë”©ì†ë„ê°€ ëŠë ¤ì§€ëŠ” í˜„ìƒì´ ë‚˜íƒ€ë‚œë‹¤.</p>

<p>í•´ê²°ì±…ìœ¼ë¡  ëª¨ë“ ê²ƒì„ ë‹´ê³  ìˆëŠ” ë‹¨ì¼ íŒŒì¼ì„ ë” ì‘ê²Œ ë¶„í•  í•˜ê³  ì‚¬ìš©ìê°€ í˜ì´ì§€ë¥¼ ì˜¤í”ˆí–ˆì„ ë• í•„ìš”í•œ ìµœì†Œí•œì˜ ìë°”ìŠ¤í¬ë¦½íŠ¸ ì½”ë“œë§Œì„ ë‹¤ìš´ë¡œë“œ í•  ìˆ˜ ìˆì–´ì•¼ í•œë‹¤.</p>

<p>ê³ ë§™ê²Œë„ ì›¹íŒ©ì€ ë¶„í•  ì½”ë“œë¥¼ ì§€ì›í•˜ëŠ”ë° ê·¸ ë°”íƒ•ì—ëŠ” es06ì˜ ëª¨ë“ˆ ì‹œìŠ¤í…œì´ ìˆë‹¤.</p>

<p>ì½”ë“œ ë¶„í• ì„ í•˜ê²Œ ë˜ë©´ ìµœì†Œí•œì˜ ìë°”ìŠ¤í¬ë¦½íŠ¸ë§Œ ë‹¤ìš´ë¡œë“œí•˜ë©´ ëœë‹¤ ì´ê²ƒì´ ì½”ë“œ ë¶„í• ì˜ í˜ì´ë¼ê³  ë³¼ ìˆ˜ ìˆë‹¤.</p>

<p>ì½”ë“œ ë¶„í• ì€ ì´ˆê¸° ë¡œë”© ì†ë„ë¥¼ ë‹¨ì¶•ì‹œí‚¬ìˆ˜ ìˆëŠ” ì„±ëŠ¥ìµœì í™”ì˜ ë°©ë²•ì¤‘ í•˜ë‚˜ì´ë‹¤.</p>
<ol>
  <li>Code Splitting</li>
  <li>Lazy load routes with React.lazy()</li>
  <li>React.Suspense to render a fallback UI</li>
</ol>

<h2 id="ì´ˆê¸°-ë¡œë”©-ë¬¸ì œì -ë¶„ì„-ë°-ë²ˆë“¤ë§-íŒŒì¼-ë¶„ì„">ì´ˆê¸° ë¡œë”© ë¬¸ì œì  ë¶„ì„ ë° ë²ˆë“¤ë§ íŒŒì¼ ë¶„ì„</h2>

<p><code class="language-plaintext highlighter-rouge">npm run build</code> ë¥¼ í•˜ê²Œ ë˜ë©´ ë²ˆë“¤ë§ ëœ íŒŒì¼ ì‚¬ì´ì¦ˆë“¤ì„ ìŠ¤ëƒ…ìƒ·ìœ¼ë¡œ ë³´ì—¬ì¤€ë‹¤.</p>

<p><img src="/assets/2021-01-01-react-codeSplitting/build.png" alt="image" />
5ê°œì˜ íŒŒì¼ì´ ìˆëŠ”ë° ë§¨ ë°‘ì˜ íŒŒì¼ë¶€í„° í•˜ë‚˜í•˜ë‚˜ ì‚´í´ë³´ìë©´</p>

<p><code class="language-plaintext highlighter-rouge"> 584 B (+10 B) build/static/css/main.e7fd4024.chunk.css</code><br />
ì–´í”Œë¦¬ì¼€ì´ì…˜ì— í•„ìš”í•œ ëª¨ë“  css ì½”ë“œë¥¼ ë‹´ê³  ìˆë‹¤.</p>

<p><code class="language-plaintext highlighter-rouge">1.06 KB (+503 B) build/static/js/main.ef7708cd.chunk.js</code><br />
ì–´í”Œë¦¬ì¼€ì´ì…˜ í•„ìš”í•œ jsíŒŒì¼ì„ ë‚˜íƒ€ë‚¸ë‹¤. ex) app.js, home.js, profile.js etc</p>

<p><code class="language-plaintext highlighter-rouge">1.18 KB (-32 B) build/static/js/runtime-main.af52a370.js</code><br />
ì›¹íŒ©ì˜ ëŸ°íƒ€ì„ ë¡œì§ìœ¼ë¡œì¨ ì–´í”Œë¦¬ì¼€ì´ì…˜ ë¡œë“œì™€ ì‹¤í–‰ë¶€ë¶„ì„ ë‚˜íƒ€ë‚¸ë‹¤.</p>

<p><code class="language-plaintext highlighter-rouge">1.57 KB (-1012.26 KB)  build/static/js/3.bd3d9297.chunk.js</code><br />
<code class="language-plaintext highlighter-rouge">1.04 MB (+1013.09 KB) build/static/js/2.7992bff4.chunk.js</code><br />
ì´ ë‘ íŒŒì¼ì€ ì–´í”Œë¦¬ì¼€ì´ì…˜ì— ì‚¬ìš©ëœ ëª¨ë“  ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì˜ë¯¸í•œë‹¤. ê¸°ë³¸ì ìœ¼ë¡œëŠ” node-modulesê°€ í¬í•¨ ë˜ì–´ ìˆë‹¤.</p>

<hr />
<h3 id="devtool-ë¶„ì„">devtool ë¶„ì„</h3>

<p>ì´ ì–´í”Œë¦¬ì¼€ì´ì…˜ì€ 5ê°œì˜ íŒŒì¼ë¡œ ë‚˜ëˆ„ì–´ì ¸ í”„ë¡œë•ì…˜ ë¹Œë“œê°€ ìµœì í™” ë˜ì—ˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ë¸Œë¼ìš°ì €ì—ì„œ í˜ì´ì§€ë¥¼ ë¡œë“œí•˜ë©´ ë¶„í• ëœ ë‹¤ì„¯ê°œì˜ chunkíŒŒì¼ì´ ëª¨ë‘ ë¡œë”©ë©ë‹ˆë‹¤.</p>

<p><img src="/assets/2021-01-01-react-codeSplitting/before.png" alt="image" /></p>

<p>íŠ¹íˆ 1.1MB ë¥¼ ì°¨ì§€í•˜ëŠ” plotjs ì°¨íŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ë‹´ê³ ìˆëŠ” ì´ jsíŒŒì¼ì€ dashboard pageì— ìˆëŠ” ì°¨íŠ¸ë¥¼ ìœ„í•´ ì„¤ì¹˜ ëœ ê²ƒì´ë‚˜, ì°¨íŠ¸ë¥¼ ë Œë”ë§í•˜ê³  ìˆì§€ ì•Šì€ home pageì—ì„œë„ ë°›ê³  ìˆìœ¼ë©° ì´ê²ƒì€ ë Œë”ë§ ì‹œê°„ì„ ì§€ì—°ì‹œí‚¤ëŠ” ê²°ê³¼ë¥¼ ë‚³ìŠµë‹ˆë‹¤.</p>

<p>í”„ë¡œë•ì…˜ ëª¨ë“œì— ìˆëŠ” ì–´í”Œë¦¬ì¼€ì´ì…˜ ì„±ëŠ¥ì„ ì¢€ ë” ì •í™•í•˜ê²Œ ì¸¡ì •í•˜ê¸° ìœ„í•´ì„  í¬ë¡¬ì˜ incognitoë¥¼ ì´ìš©í•˜ëŠ”ê²Œ ì¢‹ìœ¼ë©° í¬ë¡¬ ìµìŠ¤í…ì…˜ ê¸°ëŠ¥ë“¤ì´ êº¼ì§€ê¸° ë•Œë¬¸ì— ì¢€ ë” ëª…í™•í•œ ìƒíƒœë¡œ ì¸¡ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

<p>dev toolì˜ Performanceíƒ­ì—ì„œ  networkë¥¼ Fast3G ìƒíƒœë¡œ ì „í™˜í•©ë‹ˆë‹¤. Fast3GëŠ” ëª¨ë°”ì¼ ë„¤íŠ¸ì›Œí¬ë¥¼ í…ŒìŠ¤íŠ¸í•˜ê¸° ì¢‹ì€ ë² ì´ìŠ¤ë¼ì¸ì…ë‹ˆë‹¤. ê·¸ ë‹¤ìŒ Networkíƒ­ì—ì„œ disable cacheë¥¼ ì²´í¬í•©ë‹ˆë‹¤. ê¸°ë³¸ì ìœ¼ë¡œ í¬ë¡¬ ë¸Œë¼ìš°ì €ëŠ” ì›¹í˜ì´ì§€ë¥¼ ë¹¨ë¦¬ ë¡œë”©í•˜ê¸° ìœ„í•˜ì—¬ ìºì‹œë¥¼ í•©ë‹ˆë‹¤. í•˜ì§€ë§Œ ì´ë ‡ê²Œ í…ŒìŠ¤íŠ¸ í•˜ëŠ” í™˜ê²½ì—ì„œëŠ” ìºì‹œë¡œ ëŒì•„ê°€ëŠ” ëª¨ë“  ë¦¬ì†ŒìŠ¤ë¥¼ ê°€ì ¸ì™€ì•¼ í•˜ê¸° ë•Œë¬¸ì— ìˆ˜ë™ìœ¼ë¡œ ìºì‹œë¥¼ unableì‹œí‚µë‹ˆë‹¤.</p>

<p><img src="/assets/2021-01-01-react-codeSplitting/performance_before.png" alt="image" /></p>

<p>ë¹¨ê°„ìƒ‰ ë°•ìŠ¤ ì¤‘ ê°€ì¥ ì•„ë˜ìª½ì—ëŠ” frameì„ ì‹œê°„ë³„ë¡œ ë‚˜ëˆ„ì–´ì„œ ë³´ì—¬ì¤ë‹ˆë‹¤. ì²« ìŠ¤í¬ë¦°ìƒ·ì´ ìˆëŠ”ë° ì´ê²ƒì€ í˜ì´ì§€ê°€ ë‹¤ì‹œ reloadë˜ê¸° ì „ì´ë©°, ê·¸ëŸ° ë‹¤ìŒ í°ìƒ‰ ë°°ê²½ì˜ í™”ë©´ì„ ê½¤ ì˜¤ëœì‹œê°„ ë™ì•ˆ ë³´ì—¬ì£¼ê³  ë‹¤ì‹œ í˜ì´ì§€ê°€ ë Œë”ë§ ë˜ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì—¬ê¸°ì„œ ë¶„ì„í•  ìˆ˜ ìˆëŠ” ì ì€ ë…¸ë€ìƒ‰ ë°” ê°€ ìˆëŠ” ë¶€ë¶„ì„ requestí•˜ëŠ” ë™ì•ˆ í°ìƒ‰ ë°°ê²½ì˜ í™”ë©´ì´ ì§€ì†ë˜ê³  ê·¸ ì‹œê°„ì´ ë°”ë¡œ ë¡œë”©ì´ ì§€ì—°ë˜ëŠ” ê²ƒ ì„ì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë…¸ë€ìƒ‰ ë°”ëŠ” <code class="language-plaintext highlighter-rouge">2.7992bff4.chunk.js</code>íŒŒì¼ë¡œ ìœ„ì—ì„œ ì–¸ê¸‰í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ê·¸ëŸ¼ ì´ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ home í˜ì´ì§€ì— ë¡œë“œë¥¼ í•˜ì§€ ì•Šìœ¼ë©´ ë©ë‹ˆë‹¤.</p>

<h2 id="í•´ê²°-ì ‘ê·¼ë²•--reactlazy-suspense-ì ìš©">í•´ê²° ì ‘ê·¼ë²• : React.lazy, Suspense ì ìš©</h2>

<p>ê°€ì¥ ì²«ë²ˆì§¸ í˜ì´ì§€ì¸ í™ˆí˜ì´ì§€ ì»´í¬ë„ŒíŠ¸ë§Œ ë¶ˆëŸ¬ ì˜¤ê³  ë‚˜ë¨¸ì§€ í˜ì´ì§€ëŠ” ìœ ì €ê°€ í•´ë‹¹ í˜ì´ì§€ë¡œ ì´ë™í•  ë•Œ ë¹„ë™ê¸°ì ìœ¼ë¡œ ê²½ë¡œì— ëŒ€í•œ ì½”ë“œë¥¼ fetch í•©ë‹ˆë‹¤.
ê³ ë§™ê²Œë„ ë¦¬ì•¡íŠ¸ëŠ” lazy loadingì„ ì§€ì›í•˜ì—¬ Suspenseë¡œ ê°ê°ì˜ ì»´í¬ë„ŒíŠ¸ë¥¼ í•¸ë“¤ë§í•˜ê¸° ì‰½ê²Œ í•´ì¤ë‹ˆë‹¤.</p>

<p>React.lazy()ì‚¬ìš© ì „ ì•Œì•„ë‘ì–´ì•¼ í•  ì‚¬í•­
<code class="language-plaintext highlighter-rouge">í˜„ì¬ React v17.0.2</code></p>

<ol>
  <li>React.lazy ëŠ” default exportsë§Œ ì§€ì›í•œë‹¤.</li>
</ol>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">export</span> <span class="k">default</span> <span class="kd">function</span> <span class="nx">Profile</span><span class="p">(){</span>
    <span class="k">return</span> <span class="o">&lt;</span><span class="nx">h1</span><span class="o">&gt;</span><span class="nx">Profile</span><span class="o">&lt;</span><span class="sr">/h1</span><span class="err">&gt;
</span><span class="p">}</span>
</code></pre></div></div>
<p>ë§Œì•½ named exports ë¥¼ ì‚¬ìš©í•˜ë©´, tree shakingì´ ë™ì‘í•˜ë©° ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ì»´í¬ë„ŒíŠ¸ëŠ” ê°€ì ¸ì˜¤ì§€ ì•ŠìŠµë‹ˆë‹¤.</p>
<ol>
  <li>React.lazyì™€ SuspenseëŠ” ì„œë²„ì‚¬ì´ë“œë Œë”ë§ì—ì„  ì§€ì›ë˜ì§€ ì•Šê³ , Loadable Componentë¥¼ ì¶”ì²œí•œë‹¤ê³  í•©ë‹ˆë‹¤.</li>
</ol>

<hr />

<h3 id="reactlazy">React.lazy</h3>

<p><code class="language-plaintext highlighter-rouge">React.lazy()</code> í•¨ìˆ˜ëŠ” ë‹¤ë¥¸ í•¨ìˆ˜ë¥¼ ì¸ìë¡œ ë°›ì„ ìˆ˜ ìˆìœ¼ë©°, í”„ë¡œë¯¸ìŠ¤ë¥¼ ë°˜í™˜í•¨ìœ¼ë¡œì¨ ê·¸ í•¨ìˆ˜ê°€ ë™ì  importë¥¼ ìˆ˜í–‰í•˜ëŠ” í•¨ìˆ˜ê°€ëœë‹¤.</p>

<p><a href="https://reactjs.org/docs/code-splitting.html">React ê³µì‹ë¬¸ì„œ</a>ì—ì„œ ì œê³µí•œ ê¸°ë³¸ ì‚¬ìš©ë²• ì…ë‹ˆë‹¤..</p>

<pre><code class="language-React.lazy(()=&gt;import('./OtherComponent'))```">
Before:
```javascript
import OtherComponent from './OtherComponent';
</code></pre>
<p>After:</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">OtherComponent</span> <span class="o">=</span> <span class="nx">React</span><span class="p">.</span><span class="nx">lazy</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="k">import</span><span class="p">(</span><span class="dl">'</span><span class="s1">./OtherComponent</span><span class="dl">'</span><span class="p">));</span>

</code></pre></div></div>
<p>ì´ ë°©ì‹ì„ ê·¸ëŒ€ë¡œ  profile í˜ì´ì§€ì— ì ìš©í•´ ë³´ë©´,</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//app.js</span>

<span class="k">import</span> <span class="nx">logo</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./logo.svg</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="dl">'</span><span class="s1">./App.css</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span><span class="nx">BrowserRouter</span> <span class="k">as</span> <span class="nx">Router</span><span class="p">,</span> <span class="nx">Route</span><span class="p">,</span><span class="nx">Link</span><span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-router-dom</span><span class="dl">'</span>
<span class="k">import</span> <span class="nx">Home</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./components/Home</span><span class="dl">'</span><span class="p">;</span>
<span class="c1">//ê¸°ì¡´ route</span>
<span class="c1">// import Profile from './components/Profile';</span>
<span class="c1">// import Dashboard from './components/Dashboard'; </span>

<span class="c1">//lazy loading</span>
<span class="kd">const</span> <span class="nx">LazyProfile</span> <span class="o">=</span> <span class="nx">React</span><span class="p">.</span><span class="nx">lazy</span><span class="p">(()</span><span class="o">=&gt;</span><span class="k">import</span><span class="p">(</span><span class="dl">'</span><span class="s1">./components/Profile</span><span class="dl">'</span><span class="p">));</span>
<span class="kd">const</span> <span class="nx">LazyDashboard</span> <span class="o">=</span> <span class="nx">React</span><span class="p">.</span><span class="nx">lazy</span><span class="p">(()</span><span class="o">=&gt;</span><span class="k">import</span><span class="p">(</span><span class="dl">'</span><span class="s1">./components/Dashboard</span><span class="dl">'</span><span class="p">));</span>

<span class="kd">function</span> <span class="nx">App</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">Router</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">ul</span><span class="o">&gt;</span>
          <span class="o">&lt;</span><span class="nx">li</span><span class="o">&gt;&lt;</span><span class="nx">Link</span> <span class="nx">to</span><span class="o">=</span><span class="dl">'</span><span class="s1">/</span><span class="dl">'</span><span class="o">&gt;</span><span class="nx">Home</span><span class="o">&lt;</span><span class="sr">/Link&gt;&lt;/</span><span class="nx">li</span><span class="o">&gt;</span>
          <span class="o">&lt;</span><span class="nx">li</span><span class="o">&gt;&lt;</span><span class="nx">Link</span> <span class="nx">to</span> <span class="o">=</span><span class="dl">'</span><span class="s1">/profile</span><span class="dl">'</span><span class="o">&gt;</span><span class="nx">Profile</span><span class="o">&lt;</span><span class="sr">/Link&gt;&lt;/</span><span class="nx">li</span><span class="o">&gt;</span>
          <span class="o">&lt;</span><span class="nx">li</span><span class="o">&gt;&lt;</span><span class="nx">Link</span> <span class="nx">to</span><span class="o">=</span><span class="dl">'</span><span class="s1">/dashboard</span><span class="dl">'</span><span class="o">&gt;</span><span class="nx">Dashboard</span><span class="o">&lt;</span><span class="sr">/Link&gt;&lt;/</span><span class="nx">li</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="sr">/ul</span><span class="err">&gt;
</span>      
        <span class="o">&lt;</span><span class="nx">hr</span> <span class="o">/&gt;</span>
        <span class="o">&lt;</span><span class="nx">Route</span> <span class="nx">exact</span> <span class="nx">path</span><span class="o">=</span><span class="dl">'</span><span class="s1">/</span><span class="dl">'</span><span class="o">&gt;</span>
          <span class="o">&lt;</span><span class="nx">Home</span> <span class="o">/&gt;</span>
        <span class="o">&lt;</span><span class="sr">/Route</span><span class="err">&gt;
</span>        <span class="o">&lt;</span><span class="nx">Route</span> <span class="nx">path</span><span class="o">=</span><span class="dl">'</span><span class="s1">/profile</span><span class="dl">'</span><span class="o">&gt;</span>
          <span class="o">&lt;</span><span class="nx">LazyProfile</span> <span class="o">/&gt;</span>
        <span class="o">&lt;</span><span class="sr">/Route</span><span class="err">&gt;
</span>        <span class="o">&lt;</span><span class="nx">Route</span> <span class="nx">path</span><span class="o">=</span><span class="dl">'</span><span class="s1">/dashboard</span><span class="dl">'</span><span class="o">&gt;</span>
          <span class="o">&lt;</span><span class="nx">LazyDashboard</span> <span class="o">/&gt;</span>
        <span class="o">&lt;</span><span class="sr">/Route</span><span class="err">&gt;
</span>      <span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="sr">/Router</span><span class="err">&gt;
</span>  <span class="p">);</span>
<span class="p">}</span>

<span class="k">export</span> <span class="k">default</span> <span class="nx">App</span><span class="p">;</span>

</code></pre></div></div>
<h3 id="ê°œì„ ëœ-ì‚¬í•­-í™•ì¸">ê°œì„ ëœ ì‚¬í•­ í™•ì¸</h3>

<p>ë‹¤ì‹œ ë¹Œë“œë¥¼ í•©ë‹ˆë‹¤. ë„¤íŠ¸ì›Œí¬ íƒ­ì—ì„œ ë¡œë“œëœ jsíŒŒì¼ì„ í™•ì¸í•´ë³´ë©´, ì´ˆê¸° í˜ì´ì§€ ë¡œë”©ì„ ì§€ì—° ì‹œì¼°ë˜ 1.1MB í¬ê¸°ì˜ í° íŒŒì¼ì´ ë¡œë“œë˜ì§€ ì•Šì•˜ìŒì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤. 
<img src="/assets/2021-01-01-react-codeSplitting/after.png" alt="image" /></p>

<p>Performanceì—ì„œ ë˜í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ë‹´ê³  ìˆëŠ” íŒŒì¼ì´ ì¤„ì–´ë“  ê²ƒì€ ìœ¡ì•ˆìœ¼ë¡œ í™•ì¸í•  ìˆ˜ ìˆìœ¼ë©°, ì´ íŒŒì¼ì˜ request ì‹œê°„ ë˜í•œ   6.68s -&gt; 863.78ms ìœ¼ë¡œ ë‹¨ì¶•ëœ ê²ƒì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë¬¼ë¡  ë Œë”ë§ ì‹œê°„, request ì‹œê°„ì€ í•­ìƒ ì¼ì •í•œê±´ ì•„ë‹™ë‹ˆë‹¤. í•˜ì§€ë§Œ ìµœì†Œí•œì˜ ìë°”ìŠ¤í¬ë¦½íŠ¸ íŒŒì¼ë§Œì„ ë¡œë“œ í•  ìˆ˜ ìˆë‹¤ëŠ” ì‚¬ì‹¤ì„ í™•ì¸í–ˆìœ¼ë¯€ë¡œ, ë Œë”ë§ ì‹œê°„ì´ ë‹¨ì¶•ë˜ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

<p><img src="/assets/2021-01-01-react-codeSplitting/performance_after.png" alt="image" /></p>

<h3 id="suspense">Suspense</h3>
<p>ë¦¬ì•¡íŠ¸ lazy loading ì„ ì ìš©í•  ë•Œ, ê·¸ ì»´í¬ë„ŒíŠ¸ê°€ ì‹¤ì œ ì§€ì—° ë¡œë“œ ë  ë•Œ ê·¸ ë•Œì˜ ìƒíƒœì²˜ë¦¬ë¥¼ ê³ ë ¤í•´ì•¼ í•©ë‹ˆë‹¤. ë¦¬ì•¡íŠ¸ì—ì„œ ì œê³µí•˜ëŠ” Suspenseë¥¼ ì‚¬ìš©í•˜ëŠ”ë° ì§€ì—°ë¡œë”©ë˜ëŠ” ì»´í¬ë„ŒíŠ¸ë¥¼ wrapí•´ì£¼ë©´ëœë‹¤.   componenet ì§€ì •ì„ í•˜ì§€ ì•Šìœ¼ë©´ ì´ëŸ° ì—ëŸ¬ê°€ ë°œìƒí•˜ëŠ”ë°,
[image]
fallback UIê°€ ì§€ì •ë˜ì§€ ì•Šì•˜ë‹¤ëŠ” ì˜ë¯¸ë¡œ</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">App</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">Router</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">ul</span><span class="o">&gt;</span>
          <span class="o">&lt;</span><span class="nx">li</span><span class="o">&gt;&lt;</span><span class="nx">Link</span> <span class="nx">to</span><span class="o">=</span><span class="dl">'</span><span class="s1">/</span><span class="dl">'</span><span class="o">&gt;</span><span class="nx">Home</span><span class="o">&lt;</span><span class="sr">/Link&gt;&lt;/</span><span class="nx">li</span><span class="o">&gt;</span>
          <span class="o">&lt;</span><span class="nx">li</span><span class="o">&gt;&lt;</span><span class="nx">Link</span> <span class="nx">to</span> <span class="o">=</span><span class="dl">'</span><span class="s1">/profile</span><span class="dl">'</span><span class="o">&gt;</span><span class="nx">Profile</span><span class="o">&lt;</span><span class="sr">/Link&gt;&lt;/</span><span class="nx">li</span><span class="o">&gt;</span>
          <span class="o">&lt;</span><span class="nx">li</span><span class="o">&gt;&lt;</span><span class="nx">Link</span> <span class="nx">to</span><span class="o">=</span><span class="dl">'</span><span class="s1">/dashboard</span><span class="dl">'</span><span class="o">&gt;</span><span class="nx">Dashboard</span><span class="o">&lt;</span><span class="sr">/Link&gt;&lt;/</span><span class="nx">li</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="sr">/ul</span><span class="err">&gt;
</span>      
        <span class="o">&lt;</span><span class="nx">hr</span> <span class="o">/&gt;</span>
        <span class="p">{</span><span class="cm">/*suspense ğŸ”¥*/</span><span class="p">}</span>
        <span class="o">&lt;</span><span class="nx">React</span><span class="p">.</span><span class="nx">Suspense</span> <span class="nx">fallback</span><span class="o">=</span><span class="dl">"</span><span class="s2">Loading...</span><span class="dl">"</span><span class="o">&gt;</span> 
          <span class="o">&lt;</span><span class="nx">Route</span> <span class="nx">exact</span> <span class="nx">path</span><span class="o">=</span><span class="dl">'</span><span class="s1">/</span><span class="dl">'</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="nx">Home</span> <span class="o">/&gt;</span>
          <span class="o">&lt;</span><span class="sr">/Route</span><span class="err">&gt;
</span>          <span class="o">&lt;</span><span class="nx">Route</span> <span class="nx">path</span><span class="o">=</span><span class="dl">'</span><span class="s1">/profile</span><span class="dl">'</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="nx">LazyProfile</span> <span class="o">/&gt;</span>
          <span class="o">&lt;</span><span class="sr">/Route</span><span class="err">&gt;
</span>          <span class="o">&lt;</span><span class="nx">Route</span> <span class="nx">path</span><span class="o">=</span><span class="dl">'</span><span class="s1">/dashboard</span><span class="dl">'</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="nx">LazyDashboard</span> <span class="o">/&gt;</span>
          <span class="o">&lt;</span><span class="sr">/Route</span><span class="err">&gt;
</span>        <span class="o">&lt;</span><span class="sr">/React.Suspense</span><span class="err">&gt;
</span>      <span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="sr">/Router</span><span class="err">&gt;
</span>  <span class="p">);</span>
</code></pre></div></div>

<!-- 
[React ê³µì‹ë¬¸ì„œ](https://reactjs.org/docs/code-splitting.html)ì—ì„œ ì½”ë“œìŠ¤í”Œë¦¿ìœ¼ë¡œ ê°€ì¥ ì¢‹ì€ ë°©ë²•ì€ ë™ì  import ë¬¸ë²•ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ë¼ ëª…ì‹œë˜ì–´ìˆë‹¤. ê¸°ë³¸ ë¬¸ë²•ìœ¼ë¡  

```javascript
import("./math").then(math => {
  console.log(math.add(16, 26));
});
```
ì´ ì½”ë“œëŠ”  -->
<p>resolves with module once the module complely loaded.</p>

<p>2ê°€ì§€ ë°©ë²•</p>
<ol>
  <li>ë¼ìš°íŒ… ë ˆë²¨</li>
  <li>ì»´í¬ë„ŒíŠ¸ ë ˆë²¨</li>
</ol>


</div>


<div class="comments">
<div id="disqus_thread"></div>
<script>
 var disqus_config = function () {
     this.page.url = 'https://sooster910.github.io/2021/01/01/react-codeSplitting.html';
     this.page.identifier = '/2021/01/01/react-codeSplitting';
     this.page.title = 'React Code splitting ì ìš©ê¸°';
 };

 (function() {  // REQUIRED CONFIGURATION VARIABLE: EDIT THE SHORTNAME BELOW
     var d = document, s = d.createElement('script');

     s.src = '//https-sooster910-github-io.disqus.com/embed.js';

     s.setAttribute('data-timestamp', +new Date());
     (d.head || d.body).appendChild(s);
 })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>

</div>




<div class="related">
  <h2>Related posts</h2>
  <ul class="related-posts">
    
      <li>
        <h3>
          <a href="/2021/05/20/oop-1.html">
            The Four Pillars of OOP with JS 1 of 4 Encapsulation 
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="/2021/05/14/syntaxhighlighter.html">
            Jekyllì— Syntax Highlighter ì ìš©
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="/2021/05/11/typescript-function.html">
            [TypeScript] 2.Function
          </a>
        </h3>
      </li>
    
  </ul>
</div>




  
  <!-- <h2>All tags</h2> -->
  <div class="tag-cloud"><a href="/tag/array/" class="set-1">Array</a> <a href="/tag/dfs/" class="set-1">DFS</a> <a href="/tag/datastructure/" class="set-1">DataStructure</a> <a href="/tag/datastructure%2Falgorithm/" class="set-3">DataStructure/Algorithm</a> <a href="/tag/encapsulation/" class="set-1">Encapsulation</a> <a href="/tag/integrationtesting/" class="set-1">IntegrationTesting</a> <a href="/tag/javascript/" class="set-5">JavaScript</a> <a href="/tag/jekyll/" class="set-1">Jekyll</a> <a href="/tag/jest/" class="set-1">Jest</a> <a href="/tag/oop/" class="set-1">OOP</a> <a href="/tag/python/" class="set-1">Python</a> <a href="/tag/react/" class="set-1">React</a> <a href="/tag/rouge/" class="set-1">Rouge</a> <a href="/tag/stack/" class="set-1">Stack</a> <a href="/tag/til/" class="set-2">TIL</a> <a href="/tag/typescript/" class="set-1">TypeScript</a> <a href="/tag/dynamicarray/" class="set-1">dynamicArray</a> <a href="/tag/hook/" class="set-1">hook</a> <a href="/tag/puppeteer/" class="set-1">puppeteer</a> <a href="/tag/resursion/" class="set-1">resursion</a> <a href="/tag/staticarray/" class="set-1">staticArray</a> <a href="/tag/welcome/" class="set-1">welcome</a> <a href="/tag/%EB%81%84%EC%A0%81%EB%81%84%EC%A0%81/" class="set-1">ë„ì ë„ì </a></div>
  




<script>
  let i = 0;
  const text = '';
  const speed = parseInt('50');
  
  function typeWriter() {
    if (i < text.length) {
      document.getElementById('animated-post-description').innerHTML += text.charAt(i);
      i++;
      setTimeout(typeWriter, speed);
    }
  }

  document.getElementById('animated-post-description').style.display = 'initial';
  typeWriter();
</script>

      </div>
    </main><footer class="site-footer">
  <div class="wrapper">
    <div class="credits"><a href="https://github.com/bitbrain/jekyll-dash">dash</a> theme for Jekyll by <a href="https://github.com/bitbrain">bitbrain</a> made with <i class="fas fa-heart"></i><div class="toggleWrapper" style="display:none">
    <input type="checkbox" class="dn" id="theme-toggle" onclick="modeSwitcher()"/>
    <label for="theme-toggle" class="toggle">
    <span class="toggle__handler">
      <span class="crater crater--1"></span>
      <span class="crater crater--2"></span>
      <span class="crater crater--3"></span>
    </span>
        <span class="star star--1"></span>
        <span class="star star--2"></span>
        <span class="star star--3"></span>
        <span class="star star--4"></span>
        <span class="star star--5"></span>
        <span class="star star--6"></span>
    </label>
</div>
<script type="text/javascript">
const theme = "light";

if (theme === "light") {
    document.documentElement.setAttribute('data-theme', 'light');
} else {
    document.documentElement.setAttribute('data-theme', 'dark');
}
const userPrefers = getComputedStyle(document.documentElement).getPropertyValue('content');

function activateDarkTheme() {
    document.getElementById('theme-toggle').checked = true;
    document.documentElement.setAttribute('data-theme', 'dark');
    document.documentElement.classList.add('theme--dark');
    document.documentElement.classList.remove('theme--light');
	document.getElementById("theme-toggle").className = 'light';
	window.localStorage.setItem('theme', 'dark');
}

function activateLightTheme() {
    document.getElementById('theme-toggle').checked = false;
    document.documentElement.setAttribute('data-theme', 'light');
    document.documentElement.classList.add('theme--light');
    document.documentElement.classList.remove('theme--dark');
	document.getElementById("theme-toggle").className = 'dark';
	window.localStorage.setItem('theme', 'light');
}

if (theme === "dark") {
    activateDarkTheme();
} else if (theme === "light") {
    activateLightTheme();
} else if  (userPrefers === "light") {
    activateDarkTheme();
} else {
    activateDarkTheme();
}

function modeSwitcher() {
	let currentMode = document.documentElement.getAttribute('data-theme');
    console.log('currentMode',curentMode)
	if (currentMode === "dark") {
	    activateLightTheme();
	} else {
	    activateDarkTheme();
	}
}
</script></div>
  </div>
</footer>


<script>
      window.FontAwesomeConfig = {
        searchPseudoElements: true
      }
    </script>
  </body>

</html>
